/*UglifyJS*/const text="Сложно сказать, почему\n непосредственные участники технического прогресса освещают чрезвычайно интересные особенности картины в целом, однако конкретные выводы, разумеется, описаны максимально подробно. Но действия представителей оппозиции разоблачены.\nНезависимые государства, вне зависимости от их уровня, должны быть обнародованы. Высокий уровень вовлечения представителей целевой аудитории является четким доказательством простого факта: консультация с широким активом требует определения и уточнения системы обучения кадров, соответствующей насущным потребностям. Современные технологии достигли такого уровня, что синтетическое тестирование, в своём классическом представлении, допускает внедрение экономической целесообразности принимаемых решений.\nНе следует, однако, забывать, что сплочённость команды профессионалов играет определяющее значение для первоочередных требований. Независимые государства призывают нас к новым свершениям, которые, в свою очередь, должны быть объявлены нарушающими общечеловеческие нормы этики и морали. Господа, высокое качество позиционных исследований играет важную роль в формировании распределения внутренних резервов и ресурсов.",inputTextEl=document.querySelector("#inputText"),textExampleEl=document.querySelector("#textExample"),lines=getLines(text);let letterId=1,startMoment=null,started=!1,letterCounter=0,letterCounter_error=0;function init(){function e(e,t){const n=document.querySelector('[data-key="'+e.code+'"]');n&&(t?n.classList.add("hint"):n.classList.remove("hint"))}updateDisplayedLines(),inputTextEl.focus(),inputTextEl.addEventListener("keydown",function(t){const n=getCurrentLineNumber(),r=getCurrentLetter();started||(started=!0,startMoment=Date.now()),letterCounter++;const o=t.key===r.original,l="Enter"===t.key&&"\n"===r.original;if(e(t,!0),!(t.key.startsWith("F")&&t.key.length>1)){if(o||l)letterId++,updateDisplayedLines();else{if(t.preventDefault(),t.key.length<2){letterCounter_error++;for(const e of lines)for(const t of e)t.original===r.original&&(t.state=!1)}updateDisplayedLines()}if(n!==getCurrentLineNumber()){inputTextEl.value="",t.preventDefault(),started=!1;const e=Date.now()-startMoment;document.querySelector("#wordsSpeed").textContent=Math.round(6e4*letterCounter/e),document.querySelector("#errorPercent").textContent=Math.floor(1e4*letterCounter_error/letterCounter)/100+"%",letterCounter=0,letterCounter_error=0}}}),inputTextEl.addEventListener("keyup",function(t){e(t,!1)})}function getLines(e){const t=[];let n=[],r=0;for(const o of e){r++;let e=o;" "===e&&(e="°"),"\n"===e&&(e="¶\n"),n.push({id:r,label:e,original:o,state:!0}),(n.length>=70||"¶\n"===e)&&(t.push(n),n=[])}return n.length>0&&t.push(n),t}function lineToHtml(e){const t=document.createElement("div");t.classList.add("line");for(const n of e){const e=document.createElement("span");e.textContent=n.label,t.append(e),letterId>n.id?e.classList.add("done"):n.state||e.classList.add("hint")}return t}function getCurrentLineNumber(){for(let e=0;e<lines.length;e++)for(const t of lines[e])if(t.id===letterId)return e;return null}function updateDisplayedLines(){const e=getCurrentLineNumber();textExampleEl.innerHTML="";for(let t=0;t<lines.length;t++){const n=lineToHtml(lines[t]);textExampleEl.append(n),(t<e||t>e+2)&&n.classList.add("hidden")}}function getCurrentLetter(){for(const e of lines)for(const t of e)if(letterId===t.id)return t;return null}init();